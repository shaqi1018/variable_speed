<mxfile host="app.diagrams.net" modified="2026-01-09T12:00:00.000Z" agent="5.0" etag="toxnet-arch" version="21.0.0" type="device">
  <diagram name="TO-XNet Architecture" id="toxnet-main">
    <mxGraphModel dx="1400" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="&lt;b&gt;TO-XNet: Time-Order Cross-Domain Interaction Network&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="600" height="40" as="geometry" />
        </mxCell>
        
        <!-- Input Section -->
        <mxCell id="input-time" value="&lt;b&gt;x_time&lt;/b&gt;&lt;br&gt;(B, 1, 3072)&lt;br&gt;时域信号" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="200" y="100" width="120" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="input-order" value="&lt;b&gt;x_order&lt;/b&gt;&lt;br&gt;(B, 1, 1537)&lt;br&gt;阶次谱" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1080" y="100" width="120" height="60" as="geometry" />
        </mxCell>
        
        <!-- TimeStreamModel -->
        <mxCell id="time-stream-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=#0288d1;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="200" width="280" height="400" as="geometry" />
        </mxCell>
        
        <mxCell id="time-stream-title" value="&lt;b&gt;TimeStreamModel&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#0277bd;" vertex="1" parent="1">
          <mxGeometry x="180" y="210" width="160" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="time-head" value="&lt;b&gt;Head&lt;/b&gt;&lt;br&gt;Conv1d(1→16, k=64, s=2)&lt;br&gt;BN + ReLU + MaxPool&lt;br&gt;→ (B, 16, 768)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="150" y="240" width="220" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="multiscale" value="&lt;b&gt;MultiScaleConv1D&lt;/b&gt;&lt;br&gt;k=3 | k=7 | k=15 | k=31&lt;br&gt;→ (B, 32, 768)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="150" y="320" width="220" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="res1" value="&lt;b&gt;ResBlock1D&lt;/b&gt; (32→32, s=2)&lt;br&gt;→ (B, 32, 384)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="150" y="390" width="220" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="res2" value="&lt;b&gt;ResBlock1D&lt;/b&gt; (32→64, s=2)&lt;br&gt;→ (B, 64, 192)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="150" y="450" width="220" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="res3" value="&lt;b&gt;ResBlock1D&lt;/b&gt; (64→64, s=2)&lt;br&gt;→ (B, 64, 96)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="150" y="510" width="220" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="se" value="&lt;b&gt;SE Attention&lt;/b&gt;&lt;br&gt;通道注意力加权&lt;br&gt;→ (B, 64, 96)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#90caf9;strokeColor=#1565c0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="175" y="560" width="170" height="50" as="geometry" />
        </mxCell>
        
        <!-- OrderStreamModel -->
        <mxCell id="order-stream-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#ffa000;strokeWidth=2;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="1000" y="200" width="280" height="400" as="geometry" />
        </mxCell>
        
        <mxCell id="order-stream-title" value="&lt;b&gt;OrderStreamModel&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontColor=#ff8f00;" vertex="1" parent="1">
          <mxGeometry x="1060" y="210" width="160" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="order-conv1" value="&lt;b&gt;Conv1d&lt;/b&gt;(1→16, k=9, s=2)&lt;br&gt;BN + ReLU + MaxPool(2)&lt;br&gt;→ (B, 16, 384)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#ffa000;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1030" y="260" width="220" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="order-conv2" value="&lt;b&gt;Conv1d&lt;/b&gt;(16→32, k=5, s=2)&lt;br&gt;BN + ReLU + MaxPool(2)&lt;br&gt;→ (B, 32, 48)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#ffa000;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1030" y="340" width="220" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="order-conv3" value="&lt;b&gt;Conv1d&lt;/b&gt;(32→64, k=3, s=1)&lt;br&gt;BN + ReLU&lt;br&gt;→ (B, 64, 48)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#ffa000;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1030" y="420" width="220" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="pos-encoding" value="&lt;b&gt;OrderPositionalEncoding&lt;/b&gt;&lt;br&gt;正弦位置编码&lt;br&gt;→ (B, 64, 48)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe082;strokeColor=#ff8f00;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1045" y="500" width="190" height="50" as="geometry" />
        </mxCell>
        
        <!-- Permute -->
        <mxCell id="permute-time" value="permute&lt;br&gt;(B,64,96)→(B,96,64)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8eaf6;strokeColor=#5c6bc0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="200" y="640" width="120" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="permute-order" value="permute&lt;br&gt;(B,64,48)→(B,48,64)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8eaf6;strokeColor=#5c6bc0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1080" y="570" width="120" height="40" as="geometry" />
        </mxCell>
        
        <!-- Cross Attention -->
        <mxCell id="cross-attn-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#7b1fa2;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="500" y="650" width="400" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="cross-attn-title" value="&lt;b&gt;BidirectionalCrossAttention&lt;/b&gt;&lt;br&gt;双向交叉注意力 (4 heads, dim=64)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#6a1b9a;" vertex="1" parent="1">
          <mxGeometry x="550" y="660" width="300" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="t2o" value="&lt;b&gt;Time → Order&lt;/b&gt;&lt;br&gt;Q=f_t, K,V=f_o&lt;br&gt;attn_t = softmax(QK^T)V" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1bee7;strokeColor=#8e24aa;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="520" y="700" width="160" height="55" as="geometry" />
        </mxCell>
        
        <mxCell id="o2t" value="&lt;b&gt;Order → Time&lt;/b&gt;&lt;br&gt;Q=f_o, K,V=f_t&lt;br&gt;attn_o = softmax(QK^T)V" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1bee7;strokeColor=#8e24aa;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="720" y="700" width="160" height="55" as="geometry" />
        </mxCell>
        
        <!-- Global Pooling -->
        <mxCell id="gap-time" value="&lt;b&gt;Global Mean&lt;/b&gt;&lt;br&gt;(B,96,64)→(B,64)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#43a047;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="420" y="810" width="130" height="45" as="geometry" />
        </mxCell>
        
        <mxCell id="gap-order" value="&lt;b&gt;Global Mean&lt;/b&gt;&lt;br&gt;(B,48,64)→(B,64)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#43a047;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="850" y="810" width="130" height="45" as="geometry" />
        </mxCell>
        
        <!-- Gated Fusion -->
        <mxCell id="gated-fusion" value="&lt;b&gt;AdaptiveGatedFusion&lt;/b&gt;&lt;br&gt;gate_t = σ(MLP([f_t, f_o]))&lt;br&gt;gate_o = σ(MLP([f_t, f_o]))&lt;br&gt;fused = Linear([g_t⊙f_t, g_o⊙f_o])&lt;br&gt;→ (B, 64)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c5cae9;strokeColor=#3949ab;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="560" y="890" width="280" height="80" as="geometry" />
        </mxCell>
        
        <!-- Classifier -->
        <mxCell id="classifier" value="&lt;b&gt;Classifier&lt;/b&gt;&lt;br&gt;Linear(64→32) + ReLU + Dropout(0.3)&lt;br&gt;Linear(32→5)&lt;br&gt;→ (B, 5)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcdd2;strokeColor=#e53935;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="560" y="1000" width="280" height="70" as="geometry" />
        </mxCell>
        
        <!-- Output -->
        <mxCell id="output" value="&lt;b&gt;Output Logits&lt;/b&gt;&lt;br&gt;(B, 5)&lt;br&gt;5类故障分类" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffebee;strokeColor=#c62828;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="620" y="1100" width="160" height="50" as="geometry" />
        </mxCell>
        
        <!-- Arrows -->
        <mxCell id="arrow1" edge="1" parent="1" source="input-time" target="time-head">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow2" edge="1" parent="1" source="time-head" target="multiscale">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow3" edge="1" parent="1" source="multiscale" target="res1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow4" edge="1" parent="1" source="res1" target="res2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow5" edge="1" parent="1" source="res2" target="res3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow6" edge="1" parent="1" source="res3" target="se">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow7" edge="1" parent="1" source="se" target="permute-time">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow8" edge="1" parent="1" source="input-order" target="order-conv1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow9" edge="1" parent="1" source="order-conv1" target="order-conv2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow10" edge="1" parent="1" source="order-conv2" target="order-conv3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow11" edge="1" parent="1" source="order-conv3" target="pos-encoding">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow12" edge="1" parent="1" source="pos-encoding" target="permute-order">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow13" style="edgeStyle=orthogonalEdgeStyle;curved=1;" edge="1" parent="1" source="permute-time" target="cross-attn-box">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow14" style="edgeStyle=orthogonalEdgeStyle;curved=1;" edge="1" parent="1" source="permute-order" target="cross-attn-box">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow15" style="edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="t2o" target="gap-time">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow16" style="edgeStyle=orthogonalEdgeStyle;" edge="1" parent="1" source="o2t" target="gap-order">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow17" style="edgeStyle=orthogonalEdgeStyle;curved=1;" edge="1" parent="1" source="gap-time" target="gated-fusion">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow18" style="edgeStyle=orthogonalEdgeStyle;curved=1;" edge="1" parent="1" source="gap-order" target="gated-fusion">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow19" edge="1" parent="1" source="gated-fusion" target="classifier">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow20" edge="1" parent="1" source="classifier" target="output">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Innovation Labels -->
        <mxCell id="innov1" value="⭐ 创新点2:&lt;br&gt;多尺度时域特征" style="text;html=1;strokeColor=#1976d2;fillColor=#e3f2fd;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="380" y="315" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="innov2" value="⭐ 创新点3:&lt;br&gt;阶次位置编码" style="text;html=1;strokeColor=#ffa000;fillColor=#fff8e1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="920" y="505" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="innov3" value="⭐ 创新点1:&lt;br&gt;双向交叉注意力" style="text;html=1;strokeColor=#7b1fa2;fillColor=#f3e5f5;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="910" y="680" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="innov4" value="⭐ 创新点4:&lt;br&gt;自适应门控融合" style="text;html=1;strokeColor=#3949ab;fillColor=#e8eaf6;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="850" y="905" width="100" height="40" as="geometry" />
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fafafa;strokeColor=#bdbdbd;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="900" width="180" height="200" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-title" value="&lt;b&gt;图例 Legend&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="80" y="910" width="100" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="legend1" value="时域流" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#bbdefb;strokeColor=#1976d2;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="940" width="70" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="legend2" value="阶次流" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffecb3;strokeColor=#ffa000;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="130" y="940" width="70" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="legend3" value="交叉注意力" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1bee7;strokeColor=#8e24aa;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="975" width="70" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="legend4" value="融合层" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c5cae9;strokeColor=#3949ab;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="130" y="975" width="70" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="legend5" value="池化" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#c8e6c9;strokeColor=#43a047;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="1010" width="70" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="legend6" value="分类器" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffcdd2;strokeColor=#e53935;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="130" y="1010" width="70" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="params" value="&lt;b&gt;参数量&lt;/b&gt;&lt;br&gt;Total: 145,493&lt;br&gt;Trainable: 145,493" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="55" y="1045" width="120" height="45" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
